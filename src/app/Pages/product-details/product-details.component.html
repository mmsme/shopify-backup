<!-- <main> -->
<div class="container mt-4">
    <div class="row d-flex">
        <section class="filters card col-md-3 mb-3 mx-3">
            <section>
                <div class=" p-1">
                    <span style="font-family:Roboto;font-weight:500;font-size:1em">
                        DELIVERY & RETURNS
                    </span>
                    <hr class="mt-2 mb-1" />

                    <span style="font-family:Roboto;font-weight:500;font-size:1.25em;">
                        Choose your location

                    </span>

                    <select class="form-control mt-2" style=" border-color:#d5d2d2; box-shadow: none;"
                        (change)="ChangeGovernrate()" [(ngModel)]="selectedGovernrate">

                        <option *ngFor="let d of governrate">{{d.governorateName}}</option>
                    </select>


                    <div id="delivery" class="row ml-1 mr-1 mt-3 ">
                        <span class="fa fa-truck m-1 "></span>
                        <h6 class="mt-2">Door Delivery</h6>
                        <span style="font-family:Roboto;font-size:1em">
                            Ready for delivery between {{startDate | date: 'shortDate' }}&
                            {{endDate | date: 'shortDate' }} Apr when you order
                            within next 17hrs 17mins
                        </span>
                    </div>
                    <hr />
                    <div id="delivery" class="row ml-1 mr-1 mt-3 ">
                        <span class="fa fa-undo m-1 "></span>

                        <h6 class="mt-2">Return Policy</h6>
                        <span style="font-family:Roboto;font-size:1em">
                            14 days free return (except for underwear and personal items) up to 30 days for
                            defective products with necessity for requesting a return within 24 hours from the
                            delivery date.
                        </span>

                    </div>


                    <hr />
                    <div id="delivery" class=" ml-1 mr-1 mt-3 row">
                        <span class="fa fa-hourglass-start m-1 "></span>

                        <h6 class="mt-2">Warranty</h6>

                        <p style="font-family:Roboto;font-size:1em">
                            1 year 14 days free return (except for underwear and personal items)
                        </p>

                    </div>


                </div>
            </section>
        </section>
        <section class="product-list col-md-8 mb-3">
            <section class="mb-1">
                <div class="card d-lg-block">
                    <div class="flex-row d-flex justify-content-between">
                        <div class="d-flex">
                            <div class="row">
                                <div id="lefTDiv" class=" col-12  col-lg-6 ">
                                    <div class="img">
                                        <img [src]="imgSrc" style="width:100%;height: 270px;margin:5px 5px 5px 5px" />
                                    </div>

                                    <div class="oneImage d- d-inline justify-content-center "
                                        *ngFor="let item of product.productImages">
                                        <img class="active" [src]="item.image" style="width:21%;margin:0px 5px"
                                            (click)="openImage(item)">
                                    </div>

                                    <!--  <hr />
                                               <hr class="d-block d-lg-none" /> 
                                                <a href="#" target="_blank">Report incorrect product information</a> -->
                                </div>

                                <div id="rightDiv" class=" col-12  col-lg-6">

                                    <div id="prodactData">
                                        <div class="d-flex justify-content-between mt-1">
                                            <span class="text-white pl-1 mt-1 pr-1" style="background-color:#B60000">Official
                                                Store</span>
                                            <span id="addFav" class="fa fa-heart-o mt-2"></span>
                                        </div>

                                        <h1 class="mt-2 mr-1">{{product.productName}}</h1>
                                        <div id="brand">
                                            <!-- <span>Brand:</span><a href="#">{{product.brand.brandName}} </a><a href="#">Similar products from
                                                                                                    Samsung</a> -->
                                        </div>
                                        <div class="rating" id="raiting" class="d-flex mt-2">
                                            <ul class="list-inline rating-list" *ngFor="let star of stars"
                                                style="display: inline-block">
                                                <li [ngClass]="{'selected': (star <= product.rate)}">
                                                    <i class="fa fa-star"></i>
                                                </li>
                                            </ul>
                                            <!-- <span>{{product.rate}}</span> -->
                                        </div>
                                        <hr />

                                        <div>
                                            <p>price :
                                                {{product.price}}
                                                EGP
                                            </p>
                                            <div>discount :
                                                <span id="discount">
                                                    {{product.price*(product.discount/100)}}
                                                    EGP
                                                </span>
                                                <span style="background-color:#FEEFDE">-
                                                    {{product.discount}}%</span>
                                            </div>
                                        </div>
                                    </div>

                                    <button class=" btn btnCart  col-12 mt-2 mb-2" *ngIf="cartflag==false" style=" border-color:#d5d2d2; box-shadow: none;"
                                        (click)="AddTOCart(1,product.productId)">
                                        <i class="fa fa-cart-plus float-left" style="font-size:25px"></i> ADD TO
                                        CART</button>
                                        <!-- <hr /> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- product Details-->

                    <section class="col-12 mt-4 mb-4 ">
                        <hr>
                        <div id="details">
                            <h1 class="mt-2 mr-1"> Product Details </h1>
                            <hr />
                            <div id="ProdDetail" [innerHtml]="product.details" class="ml-3">
                            </div>
                        </div>

                    </section>
                    <!-- end product Details-->
                    <div class="card " *ngIf="commentflag==false ">
                        <div class="col-2"> <img src="assets/images/profile/profile.jpg" width="70" class="rounded-circle mt-2"> </div>
                        <div class="col-10">
                            <h1 class="mt-2 mr-1">Add a comment</h1>
                            <form [formGroup]="reviewForm" (ngSubmit)="OnSubmit()">
                                <div class="rating">
                                    <input type="radio" formControlName="review" value="5" id="5">
                                    <label for="5">☆</label>
                                    <input type="radio" formControlName="review" value="4" id="4">
                                    <label for="4">☆</label>
                                    <input type="radio" formControlName="review" value="3" id="3">
                                    <label for="3">☆</label>
                                    <input type="radio" formControlName="review" value="2" id="2">
                                    <label for="2">☆</label>
                                    <input type="radio" formControlName="review" value="1" id="1">
                                    <label for="1">☆</label>
                                </div>
                                <div class="comment-area"> <textarea formControlName="comment" class="form-control"
                                        placeholder="what is your comment?" rows="4"></textarea> </div>
                                <div class="comment-btns mt-2 mb-2">
                                    <div class="row">
                                        <div class="col-2 mx-2">
                                            <div class="pull-left"> <button class="btn btn-success btn-sm" (click)="canselComment()">Cancel</button> </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="pull-right">
                                                <button class="btn btn-success send btn-sm" type="submit"
                                                    (click)="EditComment()">Send</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <section id="sectionRecently" class="mt-3">
                        <h1 class="mt-2 mr-1">Product Feedback</h1>
                        <hr style="margin-top:0px" />

                        <div class="cards row container">
                            <div id="rating" class="col-11 col-lg-3">
                                <h6 style="font-size:0.95em" class="card-title">PRODUCT RATINGS
                                    ({{product.reviews.length}})</h6>
                                <div class="bg-light mt-3 text-center" style="border-radius:2px;">
                                    <h2 style="color: var(--orangeColor)">{{product.rate}}/<span class="font-weight-normal">5</span>
                                    </h2>
                                    <div class="rating" id="raiting" class="d-flex mt-2">
                                        <ul class="list-inline rating-list" *ngFor="let star of stars" style="display: inline-block">
                                            <li [ngClass]="{'selected': (star <= product.rate)}">
                                                <i class="fa fa-star"></i>
                                            </li>
                                        </ul>
                                    </div>
                                    <span>{{product.rate}} Raiting</span>

                                </div>
                            </div>
                            <div id="comments" class=" ml-lg-2  col-11 col-lg-8 ">
                                <h6 style="font-size:0.95em" class="card-title">LATEST COMMENTS
                                    ({{product.reviews.length}})</h6>
                                <div *ngFor="let item of product.reviews">
                                    <div class="row d-flex  mt-0 mb-2">
                                        <div class="col-lg-12">
                                            <div class="comment-widgets">
                                                <!-- Comment Row -->
                                                <div class="d-flex flex-row comment-row m-t-0">
                                                    <div class="p-2"><img src="assets/images/profile/profile.jpg" alt="user" width="50" class="rounded-circle"></div>
                                                    <div class="comment-text w-100">
                                                        <h6 class="font-medium">
                                                            {{item.customer.applicationUser.fname }}
                                                            {{item.customer.applicationUser.lname}}</h6>
                                                        <div class="rating" id="raiting" class="d-flex mt-2 mb-0" *ngIf="commentflag==true&&editflag==false">
                                                            <ul class="list-inline rating-list" *ngFor="let star of stars"
                                                                style="display: inline-block">
                                                                <li [ngClass]="{'selected': (star <= item.review)}">
                                                                    <i class="fa fa-star"></i>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <span class="m-b-15 d-block" *ngIf="commentflag==true&&editflag==false">{{item.comment}}</span>
                                                        <form [formGroup]="reviewForm1" (ngSubmit)="OnSubmit()">
                                                            <div *ngIf="editflag==true&&item.customer.applicationUser.email==email">
                                                                <div class="rating">
                                                                    <input type="radio" formControlName="review" value="5" id="5">
                                                                    <label for="5">☆</label>
                                                                    <input type="radio" formControlName="review" value="4" id="4">
                                                                    <label for="4">☆</label>
                                                                    <input type="radio" formControlName="review" value="3" id="3">
                                                                    <label for="3">☆</label>
                                                                    <input type="radio" formControlName="review" value="2" id="2">
                                                                    <label for="2">☆</label>
                                                                    <input type="radio" formControlName="review" value="1" id="1">
                                                                    <label for="1">☆</label>
                                                                </div>
                                                                <div class="comment-area"> <textarea formControlName="comment" class="form-control" [(placeholder)]="item.comment"
                                                                        rows="4"></textarea> </div>
                                                                <div class="comment-btns mt-2 mb-2">
                                                                    <div class="row">
                                                                        <div class="col-2">
                                                                            <div class="pull-left"> <button class="btn btn-success btn-sm">Cancel</button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="offset-1 col-3">
                                                                            <div class="pull-right">
                                                                                <button class="btn btn-success send btn-sm" *ngIf="editflag==true" type="submit"
                                                                                    (click)="EditComment()">edit</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </form>
                                                        <div class="comment-footer" *ngIf="item.customer.applicationUser.email==email">

                                                            <i class="fa fa-edit btn  btn-cyan btn-sm rounded-circle" *ngIf="editflag==false" (click)="Edit()"></i>
                                                        </div>
                                                    </div>
                                                </div> <!-- Comment Row -->
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Comment section -->
                                </div>
                            </div>
                            </div>
                            </section>
                            </div>
                            </section>
                            </section>
    </div>
</div>